# Global window hooks
hook global WinCreate ^[^*]+$ %{
  # Show line numbers
  addhl number_lines
  # Show matching brackets
  addhl show_matching
  # Show whitespace characters
  addhl show_whitespaces
  # Use editorconfig
  editorconfig-load
}

# Use # to comment lines
map global normal '#' :comment-line<ret>

# Scroll offset
set-option global scrolloff 5,0

# Softer colors
colorscheme lucius
face Whitespace rgb:555555

# Undo shows history number
map global normal u <a-u>

# Redo shows history number
map global normal U <a-U>

# Map ,l to change line preserving whitespace
map global user l I<esc><a-l>c

# Use jk to exit normal mode
hook global InsertChar k %{ try %{
  exec -draft hH <a-k>jk<ret> d
  exec <esc>
}}

# Show trailing whitespace
hook -group TrailingWhitespaces global WinCreate .* %{
    addhl regex '\h+$' 0:default,red
}

# Skip the *debug* buffer on bn and bp
def my-buffer-next %{
  buffer-next
  %sh{ [ "${kak_bufname}" = '*debug*' ] && echo buffer-next }
}

def my-buffer-prev %{
  buffer-previous
  %sh{ [ "${kak_bufname}" = '*debug*' ] && echo buffer-previous }
}

alias global bn my-buffer-next
alias global bp my-buffer-prev
